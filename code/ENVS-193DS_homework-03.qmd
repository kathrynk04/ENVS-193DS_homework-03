---
title: "ENVS-193DS_homework-03"
format: html
---

Github repo: https://github.com/kathrynk04/ENVS-193DS_homework-03.git

```{r message=FALSE}
library(tidyverse)
library(here)
library(flextable)
library(janitor)
library(readxl)
```

# Problem 1: Personal data

## a. Data summarizing

I could calculate the mean number of minutes I spent studying to compare average time spent studying between days that I consume caffeine before, during, or after studying because caffeine energizes me, so I think I spend more time studying on days that I consume caffeine before and during studying. On days that I don't drink caffeine or I drink caffeine after studying, I think I'm more likely to do more low-energy activities than studying because studying requires more concentration and effort.

## b. Visualization

```{r message=FALSE}
my_data <- read_csv(
  here("data", "my_data.csv")) |> 
  clean_names() |> 
  mutate(consumed_before_during_after_working = as_factor(consumed_before_during_after_working),
         consumed_before_during_after_working = fct_relevel(consumed_before_during_after_working,
                                    "None",
                                    "Before",
                                    "During",
                                    "After")) 

ggplot(data = my_data,
       aes(x = consumed_before_during_after_working,
           y = time_spent_working_min,
           color = consumed_before_during_after_working)) +
  labs(x = "Caffeine Consumption Time Relative to Studying",
       y = "Time Spent Studying (min)",
       title = "Time Spent Studying Across Caffeine Consumption Time Relative to Studying") +
  geom_jitter(width = 0.1,
              height = 0,
              shape = 21,
              alpha = 0.6) +
  stat_summary(geom = "point",
               fun = mean,
               size = 4) +
  scale_color_manual(values = c("None" = "red",
                                "Before" = "orange",
                                "During" = "green",
                                "After" = "blue")) +
  theme(legend.position = "none")


```

## c. Caption

Figure 1: Time spent studying in minutes across caffeine consumption time relative to studying. Points are colored according to whether caffeine was consumed before studying, during studying, after studying, or not at all.

## d. Table presentation

```{r message = FALSE}
ft <- my_data |> 
  select(consumed_before_during_after_working, time_spent_working_min) |> 
  group_by(consumed_before_during_after_working) |> 
  summarize(mean_time_spent_studying = mean(time_spent_working_min, na.rm = FALSE)) 

ft$mean_time_spent_studying <- round(ft$mean_time_spent_studying, 1)

flextable(ft) |> 
  set_header_labels(ft,
                    consumed_before_during_after_working = "Caffeine Consumption Time Relative to Studying",
                    mean_time_spent_studying = "Average Time Spent Studying (min)") |> 
  set_table_properties(layout = "autofit")
```

# Problem 2: Affective visualization

## a. Describe in words what an affective visualization could look like for your personal data

An affective visualization of my personal data could look like multiple sheets of paper that are all different lengths based on the amount of text in the paper, but instead of having actual text, a long zig-zag scribble could be used for each line, and each point of the zig-zag would represent a minute of studying. This would result in longer papers that represent days that I studied for more time, and shorter papers that represent days that I studied for less time. At the top of the visualization, I could have an image of a knocked over coffee cup with streams of coffee trailing down to each paper. The coffee would then spill onto the papers and turn the sheets brown with the zig-zag text still visible, but the amount of area that has spilled coffee on each paper would be proportional to the amount of caffeine I had drank on the paper's date. All of the papers would be on one image with enough space between each of them that I can fit streams of coffee to every paper.

## b. Create a sketch (on paper) of your idea.

![](images/sketch.png)

# Problem 3: Statistical critique

## a. Revisit and summarize

The statistical test included in this paper is the Mann-Whitney U test. The response variables are demographic stability, public utilities, and socio-economic stability. The predictor variable is the presence or absence of tourist arrivals.

## b. Visual clarity

The table could be more clear by having a more detailed caption that explains what "N", "Mean", and "Mean Rank" mean in the context of this statistical test and by renaming the rows to "Demographic Stability 2001-2007" and "Demographic Stability 2008-2016" so that readers would know what "Dem_Stab" stands for without having to read the text surrounding the table. It would also be more clear if the test statistics and p-values for both time periods so that readers know the results of the test without having to refer to the text around it.

## c. Aesthetic clarity

The authors reduced "visual clutter" by labeling the top of each column in bold, which makes it clear what the text in each column is, but the table could be more clear by making the row labels "Dem_Stab_2001_2007" and "Dem_Stab_2008_2016" bold as well, so that it's more obvious to readers that the values in each row are for the time period in the same row. Besides that, there is enough spacing between the columns and rows that it's very easy to tell which values are in each row and column.

## d. Recommendations

I would make the row labels bold so that it's more clear that the values in each row represent the time period in the same row, and I would also add lines between each column to make it even more clear which column each value is in. I would add two new rows, one that includes the test statistic for each period and one that includes the p-value for each period, so that it's easier for readers to find those values without having to refer to the text. I would change the row periods into a more readable format like "Demographic Stability 2001-2007" and I would describe what "N", "Mean", "Mean Rank", the test statistics, and the p-values are in the table caption so that readers that are unfamiliar with Mann-Whitney U tests know what the values represent.
